
- binary_sensor:
#####################################################
# Washer State                                      #
##################################################### 
  - name: "Washer Running"
    unique_id: 019b2047-f3d1-7258-b54d-0e865b3f676d
    state: |
      {% set _st8 = states('binary_sensor.washer_running_2') %}
      {% set _wpc = states('sensor.wash_machine_energy_current') %}
      {% if _wpc|float(0)> 0.15 %}
        on
      {% elif _wpc|float(0)< 0.077 %}
        off
      {% else %}
        {{ _st8 }}
      {% endif %}
    delay_off:
      minutes: 5
    availability: >-
      {% from 'availability_template.jinja' import avail %}
      {{- avail(['sensor.wash_machine_energy_current']) | bool -}}
    attributes:
      friendly_name: "Washer Running"
    icon: >-
      {% from 'logic_chekr.jinja' import true_any %}
      {% set _st8 = true_any(['binary_sensor.washer_running_2']) | bool %}
      {% if _st8 %}
        mdi:washing-machine
      {% elif not _st8 %}
        mdi:washing-machine-off
      {% else %}
        mdi:washing-machine-alert
      {% endif %}

#####################################################
# Dryer State                                       #
#####################################################
  - name: "Dryer Running"
    unique_id: 019b2048-6bc5-769c-bb52-24b804cfbf20
    state: |
      {% set _st8 = states('binary_sensor.dryer_running') %}
      {% set _dpc = states('sensor.dryer_power_current') %}
      {% if _dpc|float(0)> 4.5 %}
        on
      {% elif _dpc|float(0)< 0.077 %}
        off
      {% else %}
        {{ _st8 }}
      {% endif %}
    delay_off:
      minutes: 8
    availability: >-
      {% from 'availability_template.jinja' import avail %}
      {{- avail(['sensor.dryer_power_current']) | bool -}}
    attributes:
      friendly_name: "Dryer Running"
    icon: >-
      {% from 'logic_chekr.jinja' import true_any %}
      {% set _st8 = true_any(['binary_sensor.dryer_running']) | bool %}
      {% if _st8 %}
        mdi:tumble-dryer
      {% elif not _st8 %}
        mdi:tumble-dryer-off
      {% else %}
        mdi:tumble-dryer-alert
      {% endif %}
