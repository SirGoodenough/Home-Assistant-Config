- sensor:
#####################################################
## 3D Printer Template Sensors                     ##
#####################################################
  - unique_id: octoprint_time_elapsed_format
    attributes:
      friendly_name: "Printing Time Elapsed"
    state: >-
      {% if states('sensor.tarantula_time_elapsed') != "unknown" %}
        "{{ states('sensor.tarantula_time_elapsed') | int | timestamp_custom('%H:%M:%S', 0) }}"
      {% else %} 
        "{{ 0 | timestamp_custom('%H:%M:%S', 0) }}"
      {% endif %}
  - unique_id: octoprint_time_remaining_format
    attributes:
      friendly_name: "Printing Time Remaining"
    state: >-
      {% if states('sensor.tarantula_time_remaining') != "unknown" %}
        "{{ states('sensor.tarantula_time_remaining') | int | timestamp_custom('%H:%M:%S', 0) }}"
      {% else %} 
        "{{ 0 | timestamp_custom('%H:%M:%S', 0) }}"
      {% endif %}

  - unique_id: octoprint_soc_temperature_in_c
    state: '{{ "%.2f"|format((( states("sensor.octoprint_soc_temperature") | float ) -32) *5/9) }}'
    attributes:
      friendly_name: "3D PI CPU"
    device_class: temperature
    unit_of_measurement: C
  - unique_id: octoprint_bed_target_in_c
    state: '{{ "%.1f"|format((( states("sensor.octoprint_bed_target") | float ) -32) *5/9) }}'
    attributes:
      friendly_name: "3D Bed Target"
    device_class: temperature
    unit_of_measurement: C
  - unique_id: octoprint_tool_0_temperature_in_c
    state: '{{ "%.1f"|format((( states("sensor.octoprint_tool_0_temperature") | float ) -32) *5/9) }}'
    attributes:
      friendly_name: "3D Extruder"
    device_class: temperature
    unit_of_measurement: C
  - unique_id: octoprint_bed_temperature_in_c
    state: '{{ "%.1f"|format((( states("sensor.octoprint_bed_temperature") | float ) -32) *5/9) }}'
    attributes:
      friendly_name: "3D Bed"
    device_class: temperature
    unit_of_measurement: C
  - unique_id: octoprint_tool_0_target_in_c
    state: '{{ "%.1f"|format((( states("sensor.octoprint_tool_0_target") | float ) -32) *5/9) }}'
    attributes:
      friendly_name: "3D Extruder Target"
    device_class: temperature
    unit_of_measurement: C
  - unique_id: octoprint_tool_0_target_2_in_c
    state: '{{ "%.1f"|format((( states("sensor.octoprint_tool_0_target_2") | float ) -32) *5/9) }}'
    attributes:
      friendly_name: "3D Extruder Target"
    device_class: temperature
    unit_of_measurement: C

#####################################################
## Weather Template Sensors                        ##
#####################################################
  - name: "Sun State"
    unique_id: f2ef3978-8f60-4f49-9ce5-1198306412fd
    state: > 
      {% if is_state('sun.sun', 'above_horizon') %}
        up
      {% else %}
        down
      {% endif %}

#####################################################
## HVAC Template Sensors                           ##
#####################################################
  - name: LRthermostat
    unique_id: 1ca8aa2c-1fad-4c4b-99e7-4cf4dd91aa0b
    state: "{{ state_attr('climate.living_room_2', 'current_temperature') }}"
    unit_of_measurement: "°F"
    icon: "mdi:thermostat-box"

  - name: "LRthermostat Heat State"
    unique_id: c21b57a7-34df-483b-8521-4844a04fe49d
    state: "{{ state_attr('climate.living_room_2', 'hvac_action') }}"
    icon: "mdi:hvac"

  - name: "LRthermostat Fan Mode"
    unique_id: b281ed7b-7a2a-427d-b699-fba4370b6bd3
    state: "{{ state_attr('climate.living_room_2', 'fan_action') }}"
    icon: "mdi:fan-auto"

  - name: BRthermostat
    unique_id: 850df15c-a1fb-4832-a29e-18fcaf3d3b61
    state: "{{ state_attr('climate.gemodule5384', 'current_temperature') }}"
    unit_of_measurement: "°F"
    icon: "mdi:thermostat-box"

  - name: "BRthermostat Cool Mode"
    unique_id: 0a26fddd-d1ec-48fc-9984-61feb1d1e5c1
    state: "{{ state_attr('climate.gemodule5384', 'hvac_action') }}"
    icon: "mdi:air-conditioner"

  ####################################################
  #  Battery                                         #
  ####################################################
  - unique_id: lock_backdoor_bat_level
    attributes:
      friendly_name: "Lock BackDoor Battery Level"
    device_class: battery
    unit_of_measurement: "%"
    state: >-
      {% if states.zwave.kwikset_touchpad_electronic_deadbolt.attributes.battery_level is defined %}
        {{ states.zwave.kwikset_touchpad_electronic_deadbolt.attributes.battery_level }}
      {% else %}
        "-1"
      {% endif %}
