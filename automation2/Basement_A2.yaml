---
  ####################################################
  # Dryer Signal                                     # 
  ####################################################
  - id: 92312f77-02af-4a49-a728-978ff6b08229
    alias: Dryer Alert
    initial_state: on
    trigger:
    - platform: state
      entity_id: binary_sensor.dryer
      from: 'on'
      to: 'off'
      for:
        seconds: 30
    action:
    - service: script.tts_dryer_done
    - delay: 
        seconds: 4
    - service: script.media_player_dryer_alert
    
  #####################################################
  # Dust Collector                                    #
  #####################################################
  - id: 33b1583b-dde3-4228-9c88-a0d457ddac6a
    mode: single
    max_exceeded: silent
    alias: Dust Collector button turn on or off via button
    initial_state: on
    trigger:
    - platform: state
      entity_id: binary_sensor.dust_collector_button1
      from: 'off'
      to: 'on'
    action:
    - service: switch.toggle
      entity_id: switch.dust_collector
    - delay: 00:00:03

  - id: ead11d4f-da6c-4bc2-93a3-6500be201114
    mode: restart
    alias: Dust Collector Turn On Watchdog
    initial_state: on
    trigger:
    - platform: state
      entity_id: switch.dust_collector
      to: 'on'
    action:
    - alias: Dust Collector Watchdog
      delay:
        minutes: 45
    - service: switch.turn_off
      dentity_id: switch.dust_collector

  ####################################################
  # Wash Machine                                     #
  ####################################################
  - id: adb7ce4b-324f-4c17-a519-758e42f2166e
    alias: Wash Machine Dryer Daily Reboot
    initial_state: on
    trigger:
      platform: time
      at: 04:49:12
    action:
    - service: mqtt.publish
      data:
        topic: wash_machine/cmnd/restart
        payload: '1'
    - service: mqtt.publish
      data:
        topic: Dryer3/cmnd/restart
        payload: '1'

  - id: 53b25612-906e-43cf-a71c-21a93b5041a1
    alias: Washer Alert
    initial_state: on
    trigger:
    - platform: state
      entity_id: binary_sensor.washing_machine
      from: 'on'
      to: 'off'
      for:
        minutes: 5
    action:
    - service: script.media_player_washer_alert
    - delay: 00:00:06
    - service: script.tts_wash_machine_done

  ####################################################
  # Basement Smoke Detector                          #
  ####################################################
  - id: fb27c45c-c4fb-4c5e-962c-99c19c55ff26
    alias: Basement Smoke
    initial_state: on
    trigger:
    - platform: state
      entity_id: binary_sensor.basement_smoke_alarm
      to: 'on'
    action:
    - service: script.media_player_fire_alert
    - delay: 00:00:12
    - service: script.tts_smoke_detected_in_the_basement
    - service: light.turn_on
      data:
        kelvin: 1700
        brightness: 96.9
        entity_id: light.grp_kitch
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch
    - delay: 00:00:03
    - service: light.turn_on
      data:
        kelvin: 1700
        brightness: 96.9
        entity_id: light.grp_kitch
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch
    - delay: 00:00:03
    - service: light.turn_on
      data:
        kelvin: 1700
        brightness: 96.9
        entity_id: light.grp_kitch
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch
    - delay: 00:00:03
    - service: light.turn_on
      data:
        kelvin: 1700
        brightness: 96.9
        entity_id: light.grp_kitch
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch
    - delay: 00:00:03
    - service: light.turn_on
      data:
        kelvin: 1700
        brightness: 96.9
        entity_id: light.grp_kitch
