---
#####################################################
#                                                   #
#                                                   #
#               Panic Button                        #
#                                                   #
#                                                   #
#####################################################
#####################################################
# Jen Level 1.1                                     #
#####################################################
jen_needs_help:
  description: "Template message center for Jen"
  fields:
    message:
      name: Message
      description: This will set the message
      required: false
      example: "I'm lost"
      selector:
        text:
          multiline: true
          type: text
    entities:
      name: Media Player
      description: Set the media player
      required: false
      selector:
        entity:
          multiple: true
          filter:
            domain: media_player
  sequence:
    - service: tts.cloud_say
      data:
        entity_id: "{{ entities }}"
        message: "{{ message }}"
        options:
          gender: female
        language: en-US
    - delay: 00:00:04
    - service: media_player.play_media
      data:
        entity_id: "{{ entities }}"
        media_content_id: 
          "media-source://media_source/local/mp3/Buzzer.mp3"
        media_content_type: audio/mp3

#####################################################
# Jen Level 2.1                                     #
#####################################################
jen_needs_help_level2_template:
  alias: Phone Help
  description: "Texting Template message center for Jen"
  variables:
    message:
  sequence:
    - service: notify.message_house
      data:
        message: "{{ message }}"

#####################################################
# Jen Curtain Positions                             #
#####################################################
jen_night_curtain_position:
  alias: Curtains Night
  sequence:
    - service: cover.set_cover_position
      target:
        entity_id:
          - cover.jens_kitchen_curtain
      data:
        position: '{{ range(68, 72) | random }}'
    - service: cover.set_cover_position
      target:
        entity_id:
          - cover.jens_window_curtain
      data:
        position: '{{ range(28, 32) | random }}'

jen_day_curtain_position:
  alias: Curtains Day
  sequence:
    - service: cover.set_cover_position
      target:
        entity_id:
          - cover.jens_kitchen_curtain
      data:
        position: '{{ range(98, 100) | random }}'
    - service: cover.set_cover_position
      target:
        entity_id:
          - cover.jens_window_curtain
      data:
        position: '{{ range(55, 59) | random }}'

jen_open_curtain_position:
  alias: Curtains Open
  sequence:
    - service: cover.set_cover_position
      target:
        entity_id:
          - cover.jens_kitchen_curtain
          - cover.jens_window_curtain
      data:
        position: '{{ range(98, 100) | random }}'

jen_closed_curtain_position:
  alias: Curtains Close
  sequence:
    - service: cover.set_cover_position
      target:
        entity_id:
          - cover.jens_kitchen_curtain
          - cover.jens_window_curtain
      data:
        position: '{{ range(0, 2) | random }}'

reset_nag:
  alias: Jens button to stop door nags.
  sequence:
    - parallel:
      - service: mqtt.publish
        data:
          topic: rf433/KFridge
          payload: 'OFF'
      - service: mqtt.publish
        data:
          topic: rf433/PFreezer
          payload: 'OFF'
      - service: mqtt.publish
        data:
          topic: rf433/KFreezer
          payload: 'OFF'
      - service: mqtt.publish
        data:
          topic: rf433/BackDoorI
          payload: 'OFF'
    - service: script.media_player_boink

feeding_pump_silence:
  alias: Make the Feeding Fump beep stop.
  sequence:
    - service: switch.toggle
      target:
        entity_id: switch.bot_108e
    - service: script.media_player_boink



#####################################################
# TV Control                                        #
#####################################################
tv_off_sequence:
  sequence:
    - service: script.turn_on
      target:
        entity_id: script.denon_power
    - service: script.turn_on
      target:
        entity_id: script.vizio_j_power

blueray_off_sequence:
  sequence:
    - service: script.turn_on
      target:
        entity_id: script.denon_power
    - service: script.turn_on
      target:
        entity_id: script.vizio_j_power
    - service: script.turn_on
      target:
        entity_id: script.br_power

mecool_off_sequence:
  sequence:
    - service: script.turn_on
      target:
        entity_id: script.mc_power
    - service: script.turn_on
      target:
        entity_id: script.vizio_j_power
    - service: script.turn_on
      target:
        entity_id: script.denon_power

chromecast_on_sequence:
  alias: Turn the Chromecast on on Jennys TV
  description: "Runs the sequence to turn on Jennys TV in Chromecast Mode"
  use_blueprint:
    path: /config/blueprints/script/SirGoodenough/Broadlink_ON_script.yaml
    input:
      reciever_input: script.denon_chromecast
      tv_mode: script.vizio_j_hdmi

firetv_on_sequence:
  alias: Turn the FireTV on on Jennys TV
  description: "Runs the sequence to turn on Jennys TV in FireTV Mode"
  use_blueprint:
    path: /config/blueprints/script/SirGoodenough/Broadlink_ON_script.yaml
    input:
      reciever_input: script.denon_firetv
      tv_mode: script.vizio_j_hdmi

ota_tv_on_sequence:
  alias: Turn the Over-The-Air TV on on Jennys TV
  description: "Runs the sequence to turn on Jennys TV in FireTV Mode"
  use_blueprint:
    path: /config/blueprints/script/SirGoodenough/Broadlink_ON_script.yaml
    input:
      reciever_input: script.denon_tv_audio
      tv_mode: script.vizio_j_tv

blueray_on_sequence:
  alias: Turn the BlueRay on on Jennys TV
  description: "Runs the sequence to turn on Jennys TV in BlueRay Mode"
  use_blueprint:
    path: /config/blueprints/script/SirGoodenough/Broadlink_ON_script.yaml
    input:
      reciever_input:
        script.denon_blue_ray
        # \|/  Using this to turn the BlueRay ON  \|/
      tv_ota_mode:
        script.br_power
        # \|/  Using this to open the drive tray  \|/
      tv_mode: script.br_eject

mecool_on_sequence:
  alias: Turn the Mecool on on Jennys TV
  description: "Runs the sequence to turn on Jennys TV in Mecool Mode"
  use_blueprint:
    path: /config/blueprints/script/SirGoodenough/Broadlink_ON_script.yaml
    input:
      reciever_input:
        script.denon_mecool
        # \|/  Using this to turn MeCool ON  \|/
      tv_ota_mode:
        script.mc_power
        # \|/  Using this as a no-op command  \|/
      tv_mode: script.mc_home

audio_tuner_on_sequence:
  alias: Turn the Audio Tuner on on Jennys TV
  description: "Runs the sequence to turn on Jennys TV in Audio Tuner Mode"
  use_blueprint:
    path: /config/blueprints/script/SirGoodenough/Broadlink_ON_script.yaml
    input:
      reciever_input: script.denon_tuner
      tv_mode: script.vizio_j_power
