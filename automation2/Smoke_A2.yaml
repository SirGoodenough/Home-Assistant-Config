
  ####################################################
  # Smoke Detector                                   #
  ####################################################
  - id: fb27c45c-c4fb-4c5e-962c-99c19c55ff26
    alias: Smoke
    initial_state: on
    trigger:
    - platform: state
      entity_id: binary_sensor.basement_smoke_alarm
      to: 'on'
      id: basement
    - platform: device
      type: smoke
      device_id: e6cb7bd304816dc875959768023d2c1b
      entity_id: binary_sensor.stairway_smoke_smoke
      domain: binary_sensor
      id: upstairs
    action:
    - service: script.media_player_fire_alert
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,255,255]
        brightness_pct: 80
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:01
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:03
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,255,255]
        brightness_pct: 80
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:01
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:03
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,255,255]
        brightness_pct: 80
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:01
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:03
    - service: script.turn_on
      target:
        entity_id: >
          {% if trigger.id == 'basement' %}
            script.tts_smoke_detected_in_the_basement
          {% else %}
            script.tts_smoke_detected_upstairs
          {% endif %}
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,255,255]
        brightness_pct: 80
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:01
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:03
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,255,255]
        brightness_pct: 80
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:01
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:03
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,255,255]
        brightness_pct: 80
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:01
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,0,0]
        brightness_pct: 100
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:03
    - service: light.turn_off
      data:
        transition: 0
        entity_id: light.grp_kitch,light.grp_jens_color
    - delay: 00:00:01
    - service: light.turn_on
      data:
        transition: 0
        rgb_color: [255,20,147]
        brightness_pct: 88
        entity_id: light.grp_jens_color
