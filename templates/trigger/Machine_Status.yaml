
    #####################################################
    # Washer State                                      #
    ##################################################### 
- triggers:
    - trigger: numeric_state
      entity_id: sensor.wash_machine_energy_current
      above: 0.16
      variables:
        _trig: on
    - trigger: numeric_state
      entity_id: sensor.wash_machine_energy_current
      below: 0.077
      variables:
        _trig: off
    - trigger: homeassistant
      event: start
      variables:
        _trig: unknown
  binary_sensor:
    - name: "Washer Running"
      unique_id: f890192a-271a-4c27-83ea-c25d342652b2
      state: "{{ _trig }}"
      delay_off:
        minutes: 5
      auto_off:
        hours: 1.5
      availability: >-
        {% from 'availability_template.jinja' import avail %}
        {{- avail(['sensor.wash_machine_energy_current']) | bool -}}
      attributes:
        friendly_name: "Washer Running"
      icon: >-
        {# Flip sensor for better visual state. #}
        {% set _st8 = is_state(binary_sensor.washer_running.state, 'on') %}
        {% if _st8 %}
          mdi:washing-machine
        {% elif not _st8 %}
          mdi:washing-machine-off
        {% else %}
          mdi:washing-machine-alert
        {% endif %}

    #####################################################
    # Dryer State                                       #
    #####################################################
- triggers:
    - trigger: state
      entity_id: sensor.dryer_power_current
  binary_sensor:
    - name: "Dryer Running"
      unique_id: c764264c-815d-44f5-93f7-3afe89900af2
      state: |
        {% if trigger.to_state > 0.15 %}
          'on'
        {% elseif trigger.to_state < 0.1%}
          'off' 
        {% else %}
          {{ this.state }}
        {% endif %}
      delay_off:
        minutes: 8
      auto_off:
        hours: 1.5
      availability: >-
        {% from 'availability_template.jinja' import avail %}
        {{- avail(['sensor.dryer_power_current']) | bool -}}
      attributes:
        friendly_name: "Dryer Running"
      icon: >-
        {% set _st8 = is_state( this.state, 'on') %}
        {% if _st8 %}
          mdi:tumble-dryer
        {% elif not _st8 %}
          mdi:tumble-dryer-off
        {% else %}
          mdi:tumble-dryer-alert
        {% endif %}
